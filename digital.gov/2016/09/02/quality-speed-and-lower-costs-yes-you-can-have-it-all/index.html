<!--

Welcome to Digital.gov — our goal is to transform how government learns, builds,
delivers and measures digital services in the 21st century. Learn more
https://digital.gov/about Get in touch: digitalgov@gsa.gov Follow us on Twitter:
@digital_gov ======= We edit in the open at https://workflow.digital.gov/ Built
by the Digital.gov team in the GSA, using modern development practices. See the
full source code: https://github.com/GSA/digitalgov.gov Built using HUGO. Hosted
on cloud.gov Pages https://cloud.gov/pages/ -->



<!DOCTYPE html>

<html
  lang="en-US"
  itemscope
  itemtype="../../../../../schema.org/WebSite.html"
  prefix="og: http://ogp.me/ns#"
>






<!-- Mirrored from digital.gov/2016/09/02/quality-speed-and-lower-costs-yes-you-can-have-it-all/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Mar 2025 23:10:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="../../../../../gmpg.org/xfn/11.html">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  
  <script
    async
    type="text/javascript"
    id="_fed_an_ua_tag"
    src="../../../../../dap.digitalgov.gov/Universal-Federated-Analytics-Minb06b.js?agency=GSA&amp;subagency=TTS"
  ></script>

  <!-- Google Tag Manager Data Layer -->
  <script>
    dataLayer = [
      {
        "content-type": "resource+page",
        topics: "design, analytics, Tag+Manager",
      },
    ];
  </script>

  <!-- Google Tag Manager -->
  <script>
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
      j.async = true;
      j.src = "../../../../../www.googletagmanager.com/gtm5445.html?id=" + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-MZCKZPQ");
  </script>

  <!-- End Google Tag Manager -->

  <!-- Page Title -->
    
    <title>Quality, Speed, and Lower Costs: Yes, You Can Have It All – Digital.gov</title>
  <!-- Meta Description -->
  <meta
    name="description"
    content="This is post 2 in the 5-part series The Right Tools for the Job: Re-Hosting DigitalGov Search to a Dynamic Infrastructure Environment. The last major infrastructure upgrade that DigitalGov Search had was in 2010. Not only has technology evolved significantly since then, but so have business models for right-sizing costs. Moving to Amazon Web Services (AWS)"
  />
  <meta
    name="keywords"
    content="digital, government, technology, civic-tech,software-engineering, product-and-project-management, content-strategy, search, cloud-and-infrastructure"
  />

  <!-- Start of Facebook Open Graph -->
  <meta
    property="og:title"
    content="Quality, Speed, and Lower Costs: Yes, You Can Have It All"
  />
  <meta
    property="og:description"
    content="This is post 2 in the 5-part series The Right Tools for the Job: Re-Hosting DigitalGov Search to a Dynamic Infrastructure Environment. The last major infrastructure upgrade that DigitalGov Search had was in 2010. Not only has technology evolved significantly since then, but so have business models for right-sizing costs. Moving to Amazon Web Services (AWS)"
  />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://digital.gov/2016/09/02/quality-speed-and-lower-costs-yes-you-can-have-it-all/" />
  <meta property="og:site_name" content="Digital.gov" />
  <meta name="robots" content="index, follow" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:image" content="https://s3.amazonaws.com/digitalgov/digitalgov-2022-card-v3.png" />
    <meta property="og:image:alt" content=" " />
  
  <meta property="fb:admins" content="100000569454928" />
  <meta
    property="article:publisher"
    content="https://www.facebook.com/digitalgov"
  /><meta
      property="article:published_time"
      content="2016-09-02T10:00:42-0500"
    /><meta
      property="article:modified_time"
      content="2025-02-26T11:29:46-0500"
    />
  <!-- End of Facebook Open Graph -->

  <!-- Start of Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@Digital_Gov" />
  <meta name="twitter:creator" content="@Digital_Gov" />
  <meta name="twitter:image:src" content="https://s3.amazonaws.com/digitalgov/digitalgov-2022-card-v3.png" />
  <meta
    property="twitter:description"
    content="This is post 2 in the 5-part series The Right Tools for the Job: Re-Hosting DigitalGov Search to a Dynamic Infrastructure Environment. The last major infrastructure upgrade that DigitalGov Search had was in 2010. Not only has technology evolved significantly since then, but so have business models for right-sizing costs. Moving to Amazon Web Services (AWS)"
  />
  <meta
    property="twitter:title"
    content="Quality, Speed, and Lower Costs: Yes, You Can Have It All"
  />
  <!-- End of Twitter -->

  <!-- RSS Feed -->
  

  <!-- JSON Feed -->
  <link
    href="https://digital.gov/2016/09/02/quality-speed-and-lower-costs-yes-you-can-have-it-all/index.json"
    data-proofer-ignore
    rel="alternate"
    type="application/json"
    title="Digital.gov"
  />

  <!-- Sitemap-->
  <link
    rel="sitemap"
    type="application/xml"
    title="Digital.gov Sitemap"
    href="../../../../sitemap.xml"
  />

  
  
  <meta name="theme-color" content="#656bd7" />

  
  <meta name="msvalidate.01" content="A662823C2F59EB4F55F752CC752AC299" />

  <!-- CSS -->
  
  <link
    rel="stylesheet"
    href="../../../../dist/styles.css"
    type="text/css"
    media="all"
  />
  <script src="../../../../dist/js/uswds-init.min.js"></script>

  <!-- Favicons & Icons -->
  <link
    rel="apple-touch-icon"
    sizes="180x180"
    href="../../../../img/icons/apple-touch-icon30f4.png?v=3"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="32x32"
    href="../../../../img/icons/favicon-32x3230f4.png?v=3"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="16x16"
    href="../../../../img/icons/favicon-16x1630f4.png?v=3"
  />
  <link
    rel="manifest"
    href="../../../../img/icons/site30f4.webmanifest?v=3"
  />
  <link
    rel="mask-icon"
    href="../../../../img/icons/safari-pinned-tab30f4.svg?v=3"
    color="#0076d6"
  />
  <link
    rel="shortcut icon"
    href="../../../../img/icons/favicon30f4.ico?v=3"
  />
  <meta name="msapplication-TileColor" content="#0076d6" />
  <meta name="theme-color" content="#ffffff" />

  <meta name="viewport" content="width=device-width,initial-scale=1" />
</head>
<body class="news page"><!-- Google Tag Manager (noscript) --><noscript
      ><iframe
        src="../../../../../www.googletagmanager.com/ns9116.html?id=GTM-MZCKZPQ"
        height="0"
        width="0"
        style="display:none;visibility:hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->


    <div class="paper"><a class="usa-skipnav" href="#main-content">Skip to main content</a>
<section
  class="usa-banner gov-banner"
  aria-label="Official website of the United States government"
>
  <div class="usa-accordion">
    <header class="usa-banner__header">
      <div class="usa-banner__inner">
        <div class="grid-col-auto"><img
            aria-hidden="true"
            class="usa-banner__header-flag"
            src="../../../../uswds/img/us_flag_small.png"
            alt=""
            width="16"
            height="11"
          />
        </div>
        <div class="grid-col-fill tablet:grid-col-auto" aria-hidden="true">
          <p class="usa-banner__header-text">
            An official website of the United States government
          </p>
          <p class="usa-banner__header-action">Here’s how you know</p>
        </div>
        <button
          type="button"
          class="usa-accordion__button usa-banner__button"
          aria-expanded="false"
          aria-controls="gov-banner-default-default"
        >
          <span class="usa-banner__button-text">Here’s how you know</span>
        </button>
      </div>
    </header>
    <div
      class="usa-banner__content usa-accordion__content"
      id="gov-banner-default-default"
    >
      <div class="grid-row grid-gap-lg">
        <div class="usa-banner__guidance tablet:grid-col-6"><img
            class="usa-banner__icon usa-media-block__img"
            src="../../../../uswds/img/icon-dot-gov.svg"
            role="img"
            alt=""
            aria-hidden="true"
          />
          <div class="usa-media-block__body">
            <p>
              <strong>Official websites use .gov</strong>
              <br />
              A <strong>.gov</strong> website belongs to an official government
              organization in the United States.
            </p>
          </div>
        </div>
        <div class="usa-banner__guidance tablet:grid-col-6"><img
            class="usa-banner__icon usa-media-block__img"
            src="../../../../uswds/img/icon-https.svg"
            role="img"
            alt=""
            aria-hidden="true"
          />
          <div class="usa-media-block__body">
            <p>
              <strong>Secure .gov websites use HTTPS</strong><br />A
              <strong>lock</strong> (
              <span class="icon-lock">
                <svg
                  xmlns="../../../../../www.w3.org/2000/svg.html"
                  width="52"
                  height="64"
                  viewBox="0 0 52 64"
                  class="usa-banner__lock-image"
                  role="img"
                  aria-labelledby="banner-lock-description-default"
                  focusable="false"
                >
                  <title id="banner-lock-title-default">Lock</title>
                  <desc id="banner-lock-description-default">
                    Locked padlock
                  </desc>
                  <path
                    fill="#000000"
                    fill-rule="evenodd"
                    d="M26 0c10.493 0 19 8.507 19 19v9h3a4 4 0 0 1 4 4v28a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V32a4 4 0 0 1 4-4h3v-9C7 8.507 15.507 0 26 0zm0 8c-5.979 0-10.843 4.77-10.996 10.712L15 19v9h22v-9c0-6.075-4.925-11-11-11z"
                  />
                </svg> </span
              >) or <strong>https://</strong> means you’ve safely connected to
              the .gov website. Share sensitive information only on official,
              secure websites.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

  
  
  
  

  
  

  
    <section
      class="dg-site-alert usa-site-alert usa-site-alert--info
      
      "
      aria-label="Site alert"
    >
      <div class="usa-alert">
        <div class="usa-alert__body">
          
            <h3 class="usa-alert__heading">Guidance for U.S. government websites and social media</h3>
          
          
            <ul class="usa-list">
              
                <li><a href="https://digital.gov/california-wildfires">digital.gov/california-wildfires</a></li>
              
                <li><a href="https://digital.gov/hurricane-helene">digital.gov/hurricane-helene</a></li>
              
            </ul>
          
        </div>
      </div>
    </section>
  


<script type="text/javascript">
  
  const links = document.querySelectorAll(".dg-site-alert a");
  links.forEach((link) => link.classList.add("usa-link"));
</script>
<div class="usa-overlay"></div>
<header class="usa-header usa-header--extended" role="banner">
  <div class="usa-navbar">
    <div class="usa-logo" id="extended-logo">
      <em class="usa-logo__text">
        <a
          href="../../../../index.html"
          title="Digital.gov Home"
          aria-label="Digital.gov Home"
        >
          <img
            class="logo-black"
            src="../../../../img/digitalgov-logo.svg"
            alt="Digital.gov Logo"
            width="220"
            height="36"
          />
        </a>
      </em>
      <p class="sub-head display-none">Guidance on building better digital services in government</p>
    </div>

    <button class="usa-menu-btn">
      <svg
        class="usa-icon dg-icon dg-icon--standard margin-bottom-2px"
        aria-hidden="true"
        focusable="false"
        role="img"
      >
        <use xlink:href="../../../../uswds/img/sprite.svg#menu"></use>
      </svg>
      Menu
    </button>
  </div>
  <nav aria-label="Primary navigation" class="usa-nav">
    <div class="usa-nav__inner">
      <button class="usa-nav__close">
        <img src="../../../../uswds/img/close.svg" alt="close" />
      </button><ul class="usa-nav__primary usa-accordion"><li
            class="usa-nav__primary-item "
          >
            <a class="usa-nav__link" href="../../../../news/index.html"
              ><span>Blogs</span></a
            >
          </li><li
            class="usa-nav__primary-item "
          >
            <a class="usa-nav__link" href="../../../../events/index.html"
              ><span>Events</span></a
            >
          </li><li
            class="usa-nav__primary-item "
          >
            <a class="usa-nav__link" href="../../../../resources/index.html"
              ><span>Resources</span></a
            >
          </li><li
            class="usa-nav__primary-item "
          >
            <a class="usa-nav__link" href="../../../../communities/index.html"
              ><span>Communities</span></a
            >
          </li><li
            class="usa-nav__primary-item "
          >
            <a class="usa-nav__link" href="../../../../guides/index.html"
              ><span>Guides</span></a
            >
          </li><li
            class="usa-nav__primary-item "
          >
            <a class="usa-nav__link" href="../../../../job-board/index.html"
              ><span>Job board</span></a
            >
          </li></ul>
      

      <div class="usa-nav__secondary">
        <ul class="usa-nav__secondary-links">
          <li class="usa-nav__secondary-item">
            <a href="https://digital.gov/subscribe"
              ><span>Subscribe to our newsletter</span></a
            >
          </li>
        </ul>

        <form
          accept-charset="UTF-8"
          action="https://find.digitalgov.gov/search"
          id="search_form"
          method="get"
          class="usa-search usa-search--small"
        >
          <input name="utf8" type="hidden" value="&#x2713;" />
          <input
            id="affiliate"
            name="affiliate"
            type="hidden"
            value="digitalgov"
          />
          <div role="search">
            <label class="usa-sr-only" for="query">Search small</label>
            <input class="usa-input" id="query" type="search" name="query" />
            <button class="usa-button" name="commit" type="submit">
              <img
                src="../../../../uswds/img/usa-icons-bg/search--white.svg"
                class="usa-search__submit-icon"
                alt="Search"
              />
            </button>
          </div>
        </form>
      </div>
    </div>
  </nav>
</header>

      
      <main role="main" id="main-content">
    <div
    class="usa-alert usa-alert--warning dg-alert dg-alert--out-of-date"
    role="alert"
  >
    <div class="usa-alert__body">
      <h2 class="usa-alert__heading">
        You have reached a collection of archived material
      </h2>
      <div class="usa-alert__text">
        <p>
          The content available is no longer being updated and as a result you
          may encounter hyperlinks which no longer function. This content may
          contain text and references which are no longer applicable as a result
          of changes in law, regulation, and/or administration.
        </p>
      </div>
    </div>
  </div>
    <article
      class="grid-container-desktop"
      ><nav class="usa-breadcrumb usa-breadcrumb--wrap" aria-label="Breadcrumb">
  <ol class="usa-breadcrumb__list">
    <li class="usa-breadcrumb__list-item">
      <a href="../../../../index.html" class="usa-breadcrumb__link">
        <span>Home</span>
      </a>
    </li>

  
    <li class="usa-breadcrumb__list-item">
      <a
        href="../../../../news/index.html"
        class="usa-breadcrumb__link"
        aria-label="Back to Blogs"
      >
        <span>
          Blogs</span>
      </a>
    </li>

  
    <li class="usa-breadcrumb__list-item usa-current" aria-current="page">
      <span>
        Quality, Speed, and Lower Costs: Yes, You Can Have It All</span>
    </li>
    
  </ol>
</nav>
<header>







<div class="dg-page-header">
  
  
    <h1>
      Quality, Speed, and Lower Costs: Yes, You Can Have It All
      
    </h1>
  
  
</div>






  <div class="authors-list authors-list--inline">
    
      
      
      
      
        
        
        


        <div class="author usa-media-block">
          
  <img
    class="author__photo-img usa-media-block__img"
    src="../../../../img/digit-light.png"
    alt=""
  />






          <div class="usa-media-block__body">
            <a
              class="author__name"
              href="../../../../authors/dmccleskey/index.html"
              title="Posts by Dawn Pointer McCleskey"
              rel="author"
              aria-label="Read more articles by Dawn Pointer McCleskey"
              >Dawn Pointer McCleskey</a
            >
            
          </div>
        </div>
      
    
      
      
      
      
        
        
        


        <div class="author usa-media-block">
          
  <img
    class="author__photo-img usa-media-block__img"
    src="../../../../img/digit-dark.png"
    alt=""
  />






          <div class="usa-media-block__body">
            <a
              class="author__name"
              href="../../../../authors/nick-marden/index.html"
              title="Posts by Nick Marden"
              rel="author"
              aria-label="Read more articles by Nick Marden"
              >Nick Marden</a
            >
            
          </div>
        </div>
      
    
  </div>




        <div class="meta">
          <div class="date">
            <span title="Quality, Speed, and Lower Costs: Yes, You Can Have It All"
              >Sep  2, 2016</span
            >
          </div>
        </div>
      </header>

      <section>
        <div class="grid-row tablet-lg:grid-gap-6">
          <div class="grid-col-12 tablet-lg:grid-col-9 tablet-lg:order-last">
            
            <div class="content usa-prose"><p><em>This is post 2 in the 5-part series <a href="../../../08/18/the-right-tools-for-the-job-re-hosting-digitalgov-search-to-a-dynamic-infrastructure-environment/index.html">The Right Tools for the Job: Re-Hosting DigitalGov Search to a Dynamic Infrastructure Environment</a>.</em></p>
<p>The last major infrastructure upgrade that <a href="https://search.gov/">DigitalGov Search</a> had was in 2010. Not only has technology evolved significantly since then, but so have business models for right-sizing costs. Moving to Amazon Web Services (AWS) infrastructure allowed us to improve reliability by creating self-healing servers and distributing the service across four physically isolated datacenters, and reduce datacenter costs by 40% per month — no longer do we have to pay for peak throughput capacity overnight, on weekends, or during other predictably low-traffic periods.</p>
<p>We were also able to reduce our CDN costs to almost zero by insourcing the management of our content delivery network (CDN)/web application firewall (WAF). By itself this reduced our total costs by almost 50 percent, as our CDN/WAF service had cost almost the same amount as our hosting provider.</p>
<p>In the prior DigitalGov Search datacenters — one in Chicago and one in Virginia — we had pools of high-powered, physical Dell “pizza box” servers running a variety of services in a composition that had been tuned to observed traffic patterns:</p>
<div class="image">
  <img
    src="https://s3.amazonaws.com/digitalgov/_legacy-img/2016/08/543-x-561-old%5c_datacenter%5c_network_diagram.jpg"
    alt="A diagram of the old data center network."/></div>


<p>Services had been distributed opportunistically across the servers over time. We made it a primary goal of our new architecture to separate each of our services by <em>role</em>, and to build flexible pools for each role that could be scaled up or down as demand increased or decreased for each service. This sounds great on the drawing board, but to build robust, role-specific deployment recipes for multiple applications and services would be time-intensive and expensive.</p>
<h2 id="aws-opsworks-and-chef-to-the-rescue">AWS OpsWorks (and Chef) to the Rescue</h2>
<p>The DigitalGov Search infrastructure is fortunate because it is comprised of applications that have very well understood deployment practices:</p>
<ul>
<li>usasearch: The core Rails 3.x application that serves search engine results pages (SERPs) and provides customer administration tools</li>
<li>search_consumer: A NodeJS application that uses the usasearch API endpoints to render a new generation of DigitalGov Search SERPs</li>
<li><a href="https://github.com/gsa/i14y">i14y</a>: A Rails 4.x application that allows government agencies to index their own documents via API for use in their DigitalGov Search results</li>
<li><a href="https://github.com/gsa/asis">asis</a>: The Advanced Social Image Search Rails 4.x application that indexes social images from Flickr, Instagram, and RSS feeds for inclusion in <tt>search.usa.gov</tt> SERP results</li>
<li><a href="https://github.com/gsa/jobs_api">jobs_api</a>: The DigitalGov Search Jobs API Rails 3.x application that allows users to search government job listings</li>
<li><a href="http://govt-urls.usa.gov/tematres">govt-urls.usa.gov</a>: A <a href="https://sourceforge.net/projects/tematres/">Tematres</a> PHP application for managing a dataset of non-.gov and .mil URLs belonging to federal, state, and local agencies</li>
<li><a href="http://elastic.co/">Elasticsearch</a>: A Java-based search engine that supports clustering and failover</li>
</ul>
<p>The first five applications could be deployed easily using <a href="https://aws.amazon.com/opsworks/">AWS OpsWorks</a>‘ well-known deployment recipes. We pointed OpsWorks to the GitHub repos for each app, and it took care of the rest with robust <a href="http://capistranorb.com/">Capistrano</a>-style deployments of the Rails and NodeJS apps.</p>
<p>That left just Tematres and Elasticsearch, so we reached into our bag of tricks and wrote <a href="http://chef.io/">Chef</a> recipes that would fit into the OpsWorks deployment cycle for these two applications.</p>
<h2 id="deployment-in-aws">Deployment in AWS</h2>
<p>We then enabled <a href="http://docs.aws.amazon.com/opsworks/latest/userguide/workinginstances-autohealing.html">Auto Healing</a> on our application layers to ensure servers would be replaced automatically if they failed. With robust, well-tested recipes to build servers in place, we knew this replacement would be seamless if it occurred.</p>
<p>To replace our CDN and web application firewall (WAF) provider, we implemented our own Apache proxy server layer using a modified version of the <a href="https://www.owasp.org/index.php/Main_Page">OWASP</a> WAF rules for the <a href="https://www.modsecurity.org/">modsecurity</a> Apache module, echoing our previous provider’s approach. This took iterative tuning that we’ll discuss later.</p>
<p>We also migrated our database services (MySQL and Redis) to the hosted AWS equivalents (RDS MySQL and Elasticache Redis), in configurations that were designed to automatically withstand loss of a datacenter, or AWS availability zone (AZ). This was an inexpensive way to take the hassle of database availability, backups, and upgrades out of our hands.</p>
<p>With all of these pieces in place we were able to build out the following architecture in AWS:</p>
<div class="image">
  <img
    src="https://s3.amazonaws.com/digitalgov/_legacy-img/2016/08/486-x-713-aws%5c_network%5c_diagram.jpg"
    alt="A diagram of the new AWS network."/></div>


<p>The key thing to note about this architecture is that it has four new characteristics that our old environment did not:</p>
<ul>
<li>Servers will be replaced automatically if they fail</li>
<li>Service pool capacity can be scaled independently, in response to short-term or long-term traffic patterns</li>
<li>The size and cost of servers can be adjusted to match actual resource consumption, including OpsWorks <a href="http://docs.aws.amazon.com/opsworks/latest/userguide/workinginstances-autoscaling-loadbased.html">Automatic Load-Based Scaling</a> for peaks in traffic</li>
<li>By design, every service is spread across multiple Availability Zones. This ensures that an <em>entire AWS datacenter outage</em> will not bring down any service pool in particular, or the overall <tt>search.usa.gov</tt> service in general.</li>
</ul>
<p>Our cost reduction of 40% for hosting was achieved by focusing our expenses on the CPU capacity of the application server pool and the <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-io-characteristics.html">provisioned IOPS</a> needed for Elasticsearch. We also intend to look at annual pre-purchase options through <a href="https://aws.amazon.com/ec2/purchasing-options/reserved-instances/">Reserved Instance pricing</a> in the future as our usage and billing patterns settle.</p>
<h2 id="proxy-servers-web-application-firewalling-and-cdn-insourcing">Proxy Servers, Web Application Firewalling, and CDN Insourcing</h2>
<p>One of the original drivers of this project was the cost of our CDN/WAF provider. As mentioned above, we created our own proxy servers that run a modified version of the OWASP WAF software. How we did this could merit its own blog post, but the basic recipe was this:</p>
<ul>
<li>Build a proxy server that sits in front of our production application</li>
<li>Add the default OWASP rules</li>
<li>Using proxy configuration changes, route a small percentage of our live traffic to the proxy servers</li>
<li>Note the false positives and use them to tune the OWASP rule set to match our application traffic</li>
<li>Lather, rinse, repeat until we were comfortable routing 100% of our traffic through the new proxy servers</li>
</ul>
<p>Routing traffic through the new proxies was a simple, incremental shift for our customers using the <tt>search.usa.gov</tt> domain on their results pages. Customers using domain masks, however, account for almost 60% of our traffic. Routing their traffic to our new proxy servers required agency-by-agency outreach to request updates of their external DNS records. Once the last CNAME record was updated, we were handling all traffic in the new system.</p>
<p>The CDN component was even more straightforward. With our proxy servers in place, we verified that we were setting correct <a href="http://httpd.apache.org/docs/current/mod/mod_expires.html">expiration headers</a> on our assets and then enabled <a href="https://httpd.apache.org/docs/2.4/mod/mod_cache_disk.html">mod_disk_cache</a> on our proxy servers. Once we verified that assets were being served from our proxy servers without calls to our origin servers, we enabled a <a href="http://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html">Rails asset host</a> configuration on our production application to send all asset requests to a <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-working-with.html">CloudFront Distribution</a> whose origin server was our proxy server pool. This took all asset traffic off our expensive CDN provider without directing it to our origin servers.</p>
<p>In <a href="#series">later posts</a> we’ll discuss in more detail the complexities of supporting SSL certificates for our government customers’ hostnames and how we managed to comply with the DNSSEC requirement for government agencies. Those sections go into the technical details and are worth reading if you’re interested in how we solved the security challenges of providing SaaS search for hundreds of government agencies.</p>
<h2 id="aws-and-the-ato-process">AWS and the ATO Process</h2>
<p>The great thing about pools of servers built by hardened recipes is that individual server failures are a non-event: a new server is spun up automatically to replace one that failed. However, the Authority to Operate (ATO) process in particular, and the government security auditing process in general, become a bit tricky for an architecture like ours because they require:</p>
<ul>
<li>Vulnerability testing of individual servers</li>
<li>Compliance testing of individual servers</li>
<li>Penetration testing of individual servers and exposed pool endpoints</li>
</ul>
<p>Since individual servers are identified by IP address, these tests get more complicated when individual servers can be rebuilt without warning due to server failure, load spikes, or data center outages – because the new server will often come online with a different DHCP’d IP address than the one it replaced. Similarly, if a new server is spun up in response to increased load, it will have an IP address that is unknown to the security testing infrastructure and will cause erroneous red flags.</p>
<p>We worked with GSA security personnel to modify the Assessment &amp; Accreditation process in a few simple, but significant ways:</p>
<ul>
<li>Testing and scanning: Compliance and vulnerability scanning were performed against a frozen point-in-time inventory of the system prior to launch. After our servers were demonstrated to have acceptable compliance and vulnerability protocols, we were allowed to ‘unfreeze’ our inventory to allow for dynamic server replacement and up/down-scaling. Ongoing, we are responsible for notifying the security team when new servers are created, or existing servers are destroyed or re-IP’d.</li>
<li>Host inventory: In a dynamic infrastructure, an inventory maintained in a file could be outdated at any point after the file is saved. We provided our Information System Security Officer with read-only access to our AWS console, so that the current host inventory can be viewed at any time.</li>
</ul>
<h2 id="conclusions">Conclusions</h2>
<p>By applying some very commonly-understood modern operations practices — role-based deployment, server redundancy and pooling — to our application, we were able to achieve substantial cost savings while making the <tt>search.usa.gov</tt> service more resilient to failure. While some government security practices are still evolving to incorporate dynamic server environments, the success of our migration bodes well for the future of cost-effective and reliable cloud computing in government applications.</p>
<h3 id="series">
  <em>Read more of this 5-part series:</em>
</h3>
<ul>
<li><a href="../../../08/18/the-right-tools-for-the-job-re-hosting-digitalgov-search-to-a-dynamic-infrastructure-environment/index.html">The Right Tools for the Job: Re-Hosting DigitalGov Search to a Dynamic Infrastructure Environment</a></li>
<li><span style="line-height: 1.5"><a href="https://digital.gov/2016/09/06/a-domain-by-any-other-name-cnames-wildcard-records-and-another-level-of-indirection/">A Domain by Any Other Name: CNAMES, Wildcard Records and Another Level of Indirection</a> </span></li>
<li><a href="../../07/lets-encrypt-those-cnames-shall-we/index.html">Let’s Encrypt Those CNAMES, Shall We?</a></li>
<li><a href="https://digital.gov/2016/09/12/dnssec-vs-elastic-load-balancers-the-zone-apex-problem/">DNSSEC vs. Elastic Load Balancers: the Zone Apex Problem</a></li>
</ul>
</div>

            <script
  src="https://touchpoints.app.cloud.gov/touchpoints/dc4265f6.js"
  async
></script>
<section class="touchpoints-form-container">
  <button id="touchpoints-modal-button" class="usa-button" type="button">
    Was this page helpful?
  </button>
</section>
</div>

          <div class="dg-sidebar grid-col-12 tablet-lg:grid-col-3">
            





  <div class="authors-list ">
    
      
      
      
      
        
        
        


        <div class="author usa-media-block">
          
  <img
    class="author__photo-img usa-media-block__img"
    src="../../../../img/digit-light.png"
    alt=""
  />






          <div class="usa-media-block__body">
            <a
              class="author__name"
              href="../../../../authors/dmccleskey/index.html"
              title="Posts by Dawn Pointer McCleskey"
              rel="author"
              aria-label="Read more articles by Dawn Pointer McCleskey"
              >Dawn Pointer McCleskey</a
            >
            
          </div>
        </div>
      
    
      
      
      
      
        
        
        


        <div class="author usa-media-block">
          
  <img
    class="author__photo-img usa-media-block__img"
    src="../../../../img/digit-dark.png"
    alt=""
  />






          <div class="usa-media-block__body">
            <a
              class="author__name"
              href="../../../../authors/nick-marden/index.html"
              title="Posts by Nick Marden"
              rel="author"
              aria-label="Read more articles by Nick Marden"
              >Nick Marden</a
            >
            
          </div>
        </div>
      
    
  </div>




            <div class="meta">
              
              <div class="date">
                <span title="Quality, Speed, and Lower Costs: Yes, You Can Have It All"
                  >Sep  2, 2016</span>
              </div>
            </div>

            
            
            



<article class="dg-promos dg-related-communities">
    <h3 class="dg-promos__heading">Join a Community</h3>

    <ul class="dg-promos__list"><li class="promo dg-promos__list-item">
          <a
            href="../../../../communities/communicators/index51b6.html?promo"
            title="Visit Join the Communicators community page"
            class="dg-promos__link"
          >
            Join the Communicators
          </a>
        </li><li class="promo dg-promos__list-item">
          <a
            href="../../../../communities/contact-center/index51b6.html?promo"
            title="Visit Join the Contact Center community page"
            class="dg-promos__link"
          >
            Join the Contact Center
          </a>
        </li><li class="promo dg-promos__list-item">
          <a
            href="../../../../communities/multilingual/index51b6.html?promo"
            title="Visit Join the Multilingual community page"
            class="dg-promos__link"
          >
            Join the Multilingual
          </a>
        </li><li class="promo dg-promos__list-item">
          <a
            href="../../../../communities/plain-language/index51b6.html?promo"
            title="Visit Join the Plain Language community page"
            class="dg-promos__link"
          >
            Join the Plain Language
          </a>
        </li><li class="promo dg-promos__list-item">
          <a
            href="../../../../communities/social-media/index51b6.html?promo"
            title="Visit Join the Social Media community page"
            class="dg-promos__link"
          >
            Join the Social Media
          </a>
        </li><li class="promo dg-promos__list-item">
          <a
            href="../../../../communities/user-experience/index51b6.html?promo"
            title="Visit Join the User Experience community page"
            class="dg-promos__link"
          >
            Join the User Experience
          </a>
        </li><li class="promo dg-promos__list-item">
          <a
            href="../../../../communities/web-analytics-and-optimization/index51b6.html?promo"
            title="Visit Join the Web Analytics community page"
            class="dg-promos__link"
          >
            Join the Web Analytics
          </a>
        </li><li class="promo dg-promos__list-item">
          <a
            href="../../../../communities/web-content-managers/index51b6.html?promo"
            title="Visit Join the Web Managers community page"
            class="dg-promos__link"
          >
            Join the Web Managers
          </a>
        </li></ul>

    <footer class="dg-promos__footer">
      

      <a
        href="https://digital.gov/communities"
        class="dg-promos__more-link dg-more-link"
      >
        <span> See all 34 communities </span>
        <svg
          class="usa-icon dg-icon dg-icon--small margin-bottom-05"
          aria-hidden="true"
          focusable="false"
        >
          <use
            xlink:href="../../../../uswds/img/sprite.svg#arrow_forward"
          ></use>
        </svg>
      </a>
    </footer>
  </article>



<article class="list-topics">
    <h3 class="dg-promos__heading">Related Topics</h3>
    

    

        
        <a href="../../../../topics/cloud-and-infrastructure/index.html" data-topic="cloud-and-infrastructure"
          >Cloud and infrastructure</a
        >

        
        <a href="../../../../topics/content-strategy/index.html" data-topic="content-strategy"
          >Content strategy</a
        >

        
        <a href="../../../../topics/product-and-project-management/index.html" data-topic="product-and-project-management"
          >Product and project management</a
        >

        
        <a href="../../../../topics/search/index.html" data-topic="search"
          >Search</a
        >

        
        <a href="../../../../topics/software-engineering/index.html" data-topic="software-engineering"
          >Software engineering</a
        ></article>



<section class="share-tools">
  <div class="grid-row">
    <div class="grid-col-4">
      <a
        class="twitter"
        aria-label="Share on Twitter"
        target="_blank"
        rel="noreferrer"
        href="http://twitter.com/share?url=https://digital.gov%2f2016%2f09%2f02%2fquality-speed-and-lower-costs-yes-you-can-have-it-all%2f&amp;text=Quality%2c%20Speed%2c%20and%20Lower%20Costs%3a%20Yes%2c%20You%20Can%20Have%20It%20All"
      >
        <svg
          class="usa-icon dg-icon dg-icon--large margin-bottom-05"
          aria-hidden="true"
          focusable="false"
        >
          <use xlink:href="../../../../uswds/img/sprite.svg#x"></use>
        </svg>
      </a>
    </div>
    <div class="grid-col-4">
      <a
        class="facebook"
        aria-label="Share on Facebook"
        target="_blank"
        rel="noreferrer"
        href="https://www.facebook.com/sharer/sharer.php?u=https://digital.gov%2f2016%2f09%2f02%2fquality-speed-and-lower-costs-yes-you-can-have-it-all%2f"
      >
        <svg
          class="usa-icon dg-icon dg-icon--large margin-bottom-05"
          aria-hidden="true"
          focusable="false"
        >
          <use
            xlink:href="../../../../uswds/img/sprite.svg#facebook"
          ></use>
        </svg>
      </a>
    </div>
    <div class="grid-col-4">
      <a
        class="linkedin"
        aria-label="Share on LinkedIn"
        target="_blank"
        rel="noreferrer"
        href="https://www.linkedin.com/sharing/share-offsite/?url=https://digital.gov%2f2016%2f09%2f02%2fquality-speed-and-lower-costs-yes-you-can-have-it-all%2f"
      >
        <svg
          class="usa-icon dg-icon dg-icon--large margin-bottom-05"
          aria-hidden="true"
          focusable="false"
        >
          <use
            xlink:href="../../../../uswds/img/sprite.svg#linkedin"
          ></use>
        </svg>
      </a>
    </div>
  </div>
  <div class="grid-row">
    <div class="grid-col-6">
      <a
        target="_blank"
        title="Email this page"
        class="email"
        href="mailto:?subject=Quality%2c%20Speed%2c%20and%20Lower%20Costs%3a%20Yes%2c%20You%20Can%20Have%20It%20All%20%7C%20Digital.gov&body=%20%20%0A-------%0AQuality%2c%20Speed%2c%20and%20Lower%20Costs%3a%20Yes%2c%20You%20Can%20Have%20It%20All%0Ahttps://digital.govhttps%3a%2f%2fdigital.gov%2f2016%2f09%2f02%2fquality-speed-and-lower-costs-yes-you-can-have-it-all%2f%3Fem%0A-------%0A%0A&#9829; Sign-up%20for%20the%20Digital.gov%20newsletter%3A%20https%3A%2F%2Fdigital.gov%2Fsubscribe%2F"
        data-proofer-ignore
      >
        <svg
          class="usa-icon dg-icon dg-icon--standard margin-bottom-05"
          aria-hidden="true"
          focusable="false"
        >
          <use xlink:href="../../../../uswds/img/sprite.svg#mail"></use>
        </svg>
        Email</a
      >
    </div>
    <div class="grid-col-6">
      <a
        class="print"
        href="javascript:window.print()"
        onclick="window.print();return false;"
      >
        <svg
          class="usa-icon dg-icon dg-icon--standard margin-bottom-05"
          aria-hidden="true"
          focusable="false"
        >
          <use xlink:href="../../../../uswds/img/sprite.svg#print"></use>
        </svg>
        Print
      </a>
    </div>
  </div>
</section>
</div>
        </div>
      </section>
    </article>
  </main><div id="overlay" class="page-details display-none">
  <div class="contents">
    <h6>File name</h6><p>2016-09-02-quality-speed-and-lower-costs-yes-you-can-have-it-all.md</p><h6>File path</h6>
    
      
    <p>news/2016/09/2016-09-02-quality-speed-and-lower-costs-yes-you-can-have-it-all.md</p><h6>Link Shortcode</h6><p>&#x0007B;&#x0007B;&#x0003C; link "news/2016/09/2016-09-02-quality-speed-and-lower-costs-yes-you-can-have-it-all.md</p>
      <p>" &#x0003E;&#x0007D;&#x0007D;</p><button class="close" type="button" name="button">close</button>
  </div>
</div>

<section
  id="newsletter-signup"
  aria-label="Subscribe to the Digital.gov newsletter"
>
  <div class="grid-container grid-container-desktop">
    <div class="grid-row tablet-lg:grid-gap-6">
      <div class="grid-col-12 tablet:grid-col-7">
        <section class="usa-sign-up">
          <p class="blurb" id="newsletter-subscribe-description">
            <strong>Join 18,000 others in government</strong> and subscribe to
            our newsletter — a round-up of the best digital news in government
            and across our field.
          </p>
        </section>
      </div>
      <div class="grid-col-12 tablet:grid-col-5">
        <section
          class="usa-sign-up"
          aria-describedby="newsletter-subscribe-description"
        >
          <script
            src="../../../../../public.govdelivery.com/assets/Signup.js"
            data-account-code="USGSA"
            data-signup-id="34948"
          ></script>
        </section>
      </div>
    </div>
  </div>
</section>
<footer class="usa-footer usa-footer--big" role="contentinfo">
  <section class="return-to-top">
    <div
      class="grid-container grid-container-desktop usa-footer__return-to-top"
    >
      <a href="#">
        <span>Return to top</span>
        <svg
          class="usa-icon dg-icon dg-icon--standard margin-bottom-05"
          aria-hidden="true"
          focusable="false"
        >
          <use
            xlink:href="../../../../uswds/img/sprite.svg#arrow_upward"
          ></use>
        </svg>
      </a>
    </div>
  </section>
  <div class="usa-footer__primary-section">
    <div class="grid-container grid-container-desktop">
      <nav class="usa-footer__nav" aria-label="Footer navigation">
        <div class="grid-row grid-gap-4">
          <div class="mobile-lg:grid-col-6 tablet-lg:grid-col-3">
            <section
              class="usa-footer__primary-content usa-footer__primary-content--collapsible"
            >
              <h4 class="usa-footer__primary-link">Learn</h4>
              <ul class="usa-list usa-list--unstyled"><li class="usa-footer__secondary-link">
                    <a href="../../../../news/index.html">Blogs</a>
                  </li><li class="usa-footer__secondary-link">
                    <a href="../../../../events/index.html">Events</a>
                  </li><li class="usa-footer__secondary-link">
                    <a href="../../../../resources/index.html">Resources</a>
                  </li><li class="usa-footer__secondary-link">
                    <a href="../../../../communities/index.html">Communities</a>
                  </li><li class="usa-footer__secondary-link">
                    <a href="../../../../guides/index.html">Guides</a>
                  </li><li class="usa-footer__secondary-link">
                    <a href="../../../../job-board/index.html">Job board</a>
                  </li></ul>
            </section>
          </div>
          <div class="mobile-lg:grid-col-6 tablet-lg:grid-col-3">
            <section
              class="usa-footer__primary-content usa-footer__primary-content--collapsible"
            >
              <h4 class="usa-footer__primary-link">Contribute</h4>
              <ul class="usa-list usa-list--unstyled"><li class="usa-footer__secondary-link">
                    <a href="../../../../contribute/index.html">Write for us</a>
                  </li><li class="usa-footer__secondary-link">
                    <a href="../../../../digitalgov-university/index.html">Host an event</a>
                  </li><li class="usa-footer__secondary-link">
                    <a href="../../../../../github.com/GSA/digitalgov.gov/issues.html">Submit GitHub issue</a>
                  </li></ul>
            </section>
          </div>
          <div class="mobile-lg:grid-col-6 tablet-lg:grid-col-3">
            <section
              class="usa-footer__primary-content usa-footer__primary-content--collapsible"
            >
              <h4 class="usa-footer__primary-link">About</h4>
              <ul class="usa-list usa-list--unstyled"><li class="usa-footer__secondary-link">
                    <a href="../../../../about/index.html">About Us</a>
                  </li><li class="usa-footer__secondary-link">
                    <a href="../../../../policies/index.html">Site Policies</a>
                  </li><li class="usa-footer__secondary-link">
                    <a href="../../../../about/contact/index.html">Contact Us</a>
                  </li><li class="usa-footer__secondary-link">
                    <a href="../../../../about/manage-content/index.html">Content schedule</a>
                  </li></ul>
            </section>
          </div>
          <div class="mobile-lg:grid-col-6 tablet-lg:grid-col-3">
            <section
              class="usa-footer__primary-content usa-footer__primary-content--collapsible"
            >
              <h4 class="usa-footer__primary-link">Social</h4>
              <ul class="usa-list usa-list--unstyled social-links">
                <li class="usa-footer__secondary-link">
                  <svg
                    class="usa-icon dg-icon dg-icon--standard margin-bottom-05"
                    aria-hidden="true"
                    focusable="false"
                  >
                    <use
                      xlink:href="../../../../uswds/img/sprite.svg#x"
                    ></use>
                  </svg>
                  <a
                    class="text-ink hover:text-ink text-no-underline hover:text-underline"
                    href="../../../../../twitter.com/digital_gov"
                    >X (Formerly Twitter)</a
                  >
                </li>
                <li class="usa-footer__secondary-link">
                  <svg
                    class="usa-icon dg-icon dg-icon--standard margin-bottom-05"
                    aria-hidden="true"
                    focusable="false"
                  >
                    <use
                      xlink:href="../../../../uswds/img/sprite.svg#facebook"
                    ></use>
                  </svg>
                  <a
                    class="text-ink hover:text-ink text-no-underline hover:text-underline"
                    href="../../../../../www.facebook.com/digitalgov/index.html"
                    >Facebook</a
                  >
                </li>
                <li class="usa-footer__secondary-link">
                  <svg
                    class="usa-icon dg-icon dg-icon--standard margin-bottom-05"
                    aria-hidden="true"
                    focusable="false"
                  >
                    <use
                      xlink:href="../../../../uswds/img/sprite.svg#youtube"
                    ></use>
                  </svg>
                  <a
                    class="text-ink hover:text-ink text-no-underline hover:text-underline"
                    href="https://youtube.com/@DigitalGov"
                    >YouTube</a
                  >
                </li>
                <li class="usa-footer__secondary-link">
                  <svg
                    class="usa-icon dg-icon dg-icon--standard margin-bottom-05"
                    aria-hidden="true"
                    focusable="false"
                  >
                    <use
                      xlink:href="../../../../uswds/img/sprite.svg#linkedin"
                    ></use>
                  </svg>
                  <a
                    class="text-ink hover:text-ink text-no-underline hover:text-underline"
                    href="../../../../../www.linkedin.com/company/digitalgov-gsa/index.html"
                    >LinkedIn</a
                  >
                </li>
                <li class="usa-footer__secondary-link">
                  <svg
                    class="usa-icon dg-icon dg-icon--standard margin-bottom-05"
                    aria-hidden="true"
                    focusable="false"
                  >
                    <use
                      xlink:href="../../../../uswds/img/sprite.svg#rss_feed"
                    ></use>
                  </svg>
                  <a
                    class="text-ink hover:text-ink text-no-underline hover:text-underline"
                    href="../../../../index.xml"
                    >RSS</a
                  >
                </li>
              </ul>
            </section>
          </div>
        </div>
      </nav>
    </div>
  </div>
</footer>





  <div class="usa-identifier">
    <section
      class="usa-identifier__section usa-identifier__section--masthead"
      aria-label="Agency identifier"
    >
      <div class="usa-identifier__container">
        <div class="usa-identifier__logos">
          <a href="../../../../../www.gsa.gov/index.html" class="usa-identifier__logo">
            <img
              class="usa-identifier__logo-img"
              src="../../../../img/gsa-logo-w100.png"
              alt="GSA logo"
              role="img"
              width="100"
              height="100"
            />
          </a>
        </div>
        <section
          class="usa-identifier__identity"
          aria-label="Agency description"
        >
          <p class="usa-identifier__identity-domain">Digital.gov</p>
          <p class="usa-identifier__identity-disclaimer">
            An official website of the
            <a href="../../../../../www.gsa.gov/index.html">U.S. General Services Administration</a>
          </p>
        </section>
      </div>
    </section>
    <nav
      class="usa-identifier__section usa-identifier__section--required-links"
      aria-label="Important links"
    >
      <div class="usa-identifier__container">
        <ul class="usa-identifier__required-links-list">
          
            <li class="usa-identifier__required-links-item">
              <a
                href="../../../../../www.gsa.gov/about-us.html"
                class="usa-identifier__required-link usa-link"
              >
                About GSA
              </a>
            </li>
          
            <li class="usa-identifier__required-links-item">
              <a
                href="../../../../../www.gsa.gov/website-information/accessibility-statement.html"
                class="usa-identifier__required-link usa-link"
              >
                Accessibility statement
              </a>
            </li>
          
            <li class="usa-identifier__required-links-item">
              <a
                href="../../../../../www.gsa.gov/reference/freedom-of-information-act-foia.html"
                class="usa-identifier__required-link usa-link"
              >
                FOIA requests
              </a>
            </li>
          
            <li class="usa-identifier__required-links-item">
              <a
                href="../../../../../www.gsa.gov/reference/civil-rights-programs/the-no-fear-act.html"
                class="usa-identifier__required-link usa-link"
              >
                No FEAR Act data
              </a>
            </li>
          
            <li class="usa-identifier__required-links-item">
              <a
                href="../../../../../www.gsaig.gov/index.html"
                class="usa-identifier__required-link usa-link"
              >
                Office of the Inspector General
              </a>
            </li>
          
            <li class="usa-identifier__required-links-item">
              <a
                href="https://www.gsa.gov/reference/reports/budget-performance"
                class="usa-identifier__required-link usa-link"
              >
                Performance reports
              </a>
            </li>
          
            <li class="usa-identifier__required-links-item">
              <a
                href="../../../../../www.gsa.gov/website-information/website-policies.html"
                class="usa-identifier__required-link usa-link"
              >
                Privacy policy
              </a>
            </li>
          
        </ul>
      </div>
    </nav>
    <section
      class="usa-identifier__section usa-identifier__section--usagov"
      aria-label="U.S. government information and services"
    >
      <div class="usa-identifier__container">
        <div class="usa-identifier__usagov-description">
          Looking for U.S. government information and services?
        </div>
        <a href="../../../../../www.usa.gov/index.html" class="usa-link">
          Visit USA.gov
        </a>
      </div>
    </section>
  </div>

</div>
    

    <div id="clicks_iframe" class="display-none"></div>
  </body>

  
  <script type="text/javascript">let glossaryPath = null;
    const glossaryIcon = "#\/uswds\/img\/sprite.svg#expand_more"
  </script>

  <script src="../../../../dist/js/uswds.min.js"></script>
  <script src="../../../../dist/js/main.js"></script>

<!-- Mirrored from digital.gov/2016/09/02/quality-speed-and-lower-costs-yes-you-can-have-it-all/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Mar 2025 23:10:23 GMT -->
</html>
